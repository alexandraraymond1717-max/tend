<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tend ‚Äî Intentional Living</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,500;1,9..144,300;1,9..144,400&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300;1,400&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --bg-main: #FAF8F5;
      --bg-card: #FFFFFF;
      --bg-elevated: #F0EBE4;
      --text: #2D2A26;
      --text-light: #6B6660;
      --text-muted: #9A9590;
      --border: #E8E2D9;
      --border-dark: #D4CCC0;
      --accent: #7D9B76;
      --accent-light: #E8F0E6;
      
      --winter: #5B9BD5;
      --spring: #6BBF59;
      --summer: #F4B942;
      --fall: #D66B4B;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background-color: var(--bg-main);
      color: var(--text);
      line-height: 1.6;
      min-height: 100vh;
    }

    h1, h2, h3, h4 { font-family: 'Fraunces', serif; font-weight: 400; }

    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--border-dark); border-radius: 3px; }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 100% { opacity: 0.4; } 50% { opacity: 0.7; } }
    .fade-in { animation: fadeIn 0.4s ease-out forwards; }
    .slide-in { animation: slideIn 0.4s ease-out forwards; }

    input:focus, textarea:focus, select:focus { outline: none; border-color: var(--accent) !important; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // ============ CONSTANTS ============
    const LIFE_AREAS = {
      health: { name: 'Health & Wellness', icon: '‚óê', color: '#6BBF59' },
      relationships: { name: 'Relationships', icon: '‚ô°', color: '#E88B9C' },
      career: { name: 'Career & Work', icon: '‚óÜ', color: '#5B9BD5' },
      finances: { name: 'Finances', icon: '‚óã', color: '#F4B942' },
      growth: { name: 'Personal Growth', icon: '‚ú¶', color: '#9B8AAE' },
      fun: { name: 'Fun & Adventure', icon: '‚ú∫', color: '#D66B4B' },
    };

    const VALUE_KEYWORDS = {
      'Freedom': ['freedom', 'free', 'autonomy', 'independent', 'flexible'],
      'Connection': ['connection', 'connected', 'together', 'relationship', 'partner', 'love', 'present', 'presence'],
      'Growth': ['growth', 'grow', 'learn', 'improve', 'better', 'develop'],
      'Peace': ['peace', 'calm', 'peaceful', 'stress', 'less stressed', 'relaxed', 'balance'],
      'Health': ['health', 'healthy', 'fit', 'strong', 'energy', 'wellness'],
      'Adventure': ['adventure', 'travel', 'explore', 'new', 'exciting', 'experience'],
      'Creativity': ['creative', 'creativity', 'create', 'art', 'make', 'build'],
      'Family': ['family', 'kids', 'children', 'parents', 'home'],
      'Joy': ['joy', 'happy', 'happiness', 'fun', 'laugh', 'enjoy'],
      'Security': ['security', 'secure', 'stable', 'stability', 'safe'],
    };

    const MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    const MONTH_FULL = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];

    const PHASES = { EXPLORE: 'explore', GROUND: 'ground', REVEAL: 'reveal', PLAN: 'plan' };
    const CENTER_VIEWS = { YEAR: 'year', SEASONS: 'seasons', MONTHLY: 'monthly' };

    // ============ MAIN APP ============
    function TendApp() {
      // Core state
      const [phase, setPhase] = useState(PHASES.EXPLORE);
      const [values, setValues] = useState([]);
      const [lifeAreaRatings, setLifeAreaRatings] = useState({
        health: 5, relationships: 5, career: 5, finances: 5, growth: 5, fun: 5
      });
      const [events, setEvents] = useState([]);
      const [goals, setGoals] = useState([]);
      const [notes, setNotes] = useState('');
      const [seasonIntentions, setSeasonIntentions] = useState({
        winter: '', spring: '', summer: '', fall: ''
      });
      
      // Chat state
      const [messages, setMessages] = useState([]);
      const [inputValue, setInputValue] = useState('');
      const [isTyping, setIsTyping] = useState(false);
      const [exchangeCount, setExchangeCount] = useState(0);
      const messagesEndRef = useRef(null);

      // UI state
      const [revealed, setRevealed] = useState(false);
      const [activeTab, setActiveTab] = useState('events');
      const [centerView, setCenterView] = useState(CENTER_VIEWS.YEAR);
      const [expandedEvent, setExpandedEvent] = useState(null);
      const [showEventModal, setShowEventModal] = useState(false);
      const [showGoalModal, setShowGoalModal] = useState(false);
      const [selectedMonth, setSelectedMonth] = useState(null);

      // Initialize
      useEffect(() => {
        setMessages([{
          role: 'assistant',
          content: `Welcome to Tend.

Before we get into calendars and planning, I want to understand what you actually want from this year.

What would make 2026 feel like a success? It could be a concrete achievement, a feeling you want to have, a change in how you're living ‚Äî whatever comes to mind first.`
        }]);
      }, []);

      useEffect(() => {
        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
      }, [messages]);

      // ============ TEXT ANALYSIS ============
      const analyzeText = (text) => {
        const lower = text.toLowerCase();
        const detected = { values: [] };
        Object.entries(VALUE_KEYWORDS).forEach(([value, keywords]) => {
          if (keywords.some(kw => lower.includes(kw)) && !values.includes(value)) {
            detected.values.push(value);
          }
        });
        return detected;
      };

      const processAnalysis = (detected) => {
        if (detected.values.length > 0) {
          setValues(prev => [...new Set([...prev, ...detected.values])].slice(0, 4));
        }
      };

      const parseEvents = (text) => {
        const lower = text.toLowerCase();
        const foundEvents = [];
        MONTH_FULL.forEach((month, idx) => {
          if (lower.includes(month.toLowerCase())) {
            foundEvents.push({ month: idx });
          }
        });
        return foundEvents;
      };

      // ============ CONVERSATION LOGIC ============
      const generateResponse = (userMessage, currentPhase, exchangeNum) => {
        const detected = analyzeText(userMessage);
        processAnalysis(detected);
        const lower = userMessage.toLowerCase();

        if (currentPhase === PHASES.EXPLORE) {
          if (exchangeNum === 1) {
            const hasFeeling = ['feel', 'feeling', 'want to be', 'less', 'more'].some(w => lower.includes(w));
            if (hasFeeling) {
              return `That's about <em>how</em> you want to feel ‚Äî which is often more important than what you achieve.

What's getting in the way of that right now?`;
            }
            return `Tell me more. What would that actually look like in your daily life?`;
          }
          
          if (exchangeNum === 2) {
            return `I'm starting to see what matters to you.

If nothing changed this year, how would that feel?`;
          }

          if (exchangeNum >= 3) {
            setPhase(PHASES.GROUND);
            return `Before I share what I'm hearing, help me understand what's already planned.

What's committed this year ‚Äî trips, big events, deadlines? Just mention the month and what it is.`;
          }
        }

        if (currentPhase === PHASES.GROUND) {
          const foundEvents = parseEvents(userMessage);
          
          if (foundEvents.length > 0) {
            const newEvents = foundEvents.map((e, i) => ({
              id: Date.now() + i,
              title: `Event in ${MONTHS[e.month]}`,
              month: e.month,
              lifeArea: 'fun',
              details: { flights: '', stays: '', activities: '', notes: '' },
            }));
            setEvents(prev => [...prev, ...newEvents]);
          }

          setTimeout(() => {
            setPhase(PHASES.REVEAL);
            setRevealed(true);
          }, 500);

          const valuesSummary = values.length > 0 
            ? values.slice(0, 3).join(', ')
            : 'intention and presence';

          return `<strong>Here's what I'm hearing:</strong>

Your values center around <em>${valuesSummary}</em>.

${foundEvents.length > 0 
  ? `You have ${foundEvents.length} thing${foundEvents.length > 1 ? 's' : ''} anchoring the year.`
  : `Your calendar is open ‚Äî that's space to be intentional.`}

Your year is taking shape. Switch between Year, Seasons, and Monthly views to see it from different angles. Use the sidebar to plan event details.

What's missing?`;
        }

        if (currentPhase === PHASES.REVEAL || currentPhase === PHASES.PLAN) {
          setPhase(PHASES.PLAN);
          
          if (lower.includes('plan') || lower.includes('suggest') || lower.includes('ideas') || lower.includes('activities') || lower.includes('where to stay')) {
            const eventMention = events.find(e => lower.includes(MONTHS[e.month].toLowerCase()) || lower.includes(e.title.toLowerCase()));
            if (eventMention) {
              return `For your ${MONTHS[eventMention.month]} event, here are some thoughts:

<strong>Activities:</strong>
‚Ä¢ Explore the local neighborhood on foot the first day
‚Ä¢ Find one "must-do" experience and leave room for spontaneity
‚Ä¢ Schedule downtime ‚Äî rest is part of the trip

<strong>Stays:</strong>
‚Ä¢ Look for somewhere with a kitchen if you want flexibility
‚Ä¢ Consider location vs. price ‚Äî being central often saves time

<strong>Getting there:</strong>
‚Ä¢ Book flights 6-8 weeks out for best prices
‚Ä¢ Morning flights = fewer delays

Click on the event in the sidebar to add these details.`;
            }
            return `What event would you like to plan? I can suggest activities, places to stay, and things to consider.`;
          }

          if (lower.includes('yes') || lower.includes('right') || lower.includes('good')) {
            return `Good. Looking at your year ‚Äî what feels like it needs attention first?

Try the Seasons view to set intentions for each part of the year.`;
          }

          const prompts = [
            `What's one thing you've been wanting to plan but haven't?`,
            `Looking at the seasons ‚Äî where do you need to protect space?`,
            `Is there a trip or experience you keep pushing off?`,
          ];
          return prompts[Math.floor(Math.random() * prompts.length)];
        }

        return `Tell me more about that.`;
      };

      // ============ HANDLERS ============
      const handleSendMessage = () => {
        if (!inputValue.trim()) return;
        
        const userMessage = inputValue.trim();
        setMessages(prev => [...prev, { role: 'user', content: userMessage }]);
        setInputValue('');
        setIsTyping(true);
        setExchangeCount(prev => prev + 1);

        setTimeout(() => {
          const response = generateResponse(userMessage, phase, exchangeCount + 1);
          setMessages(prev => [...prev, { role: 'assistant', content: response }]);
          setIsTyping(false);
        }, 1200);
      };

      const handleSkip = () => {
        setPhase(PHASES.PLAN);
        setRevealed(true);
        setMessages(prev => [...prev, {
          role: 'assistant',
          content: `No problem ‚Äî let's dive in.

Use the view switcher above the circle to explore your year differently. Add events, set season intentions, and plan the details in the sidebar.

I'm here to help ‚Äî ask me to suggest activities or ideas for any event.`
        }]);
      };

      const handleAddEvent = (eventData) => {
        setEvents(prev => [...prev, { 
          ...eventData, 
          id: Date.now(),
          details: { flights: '', stays: '', activities: '', notes: '' },
        }]);
        setShowEventModal(false);
      };

      const handleUpdateEventDetails = (eventId, field, value) => {
        setEvents(prev => prev.map(e => 
          e.id === eventId ? { ...e, details: { ...e.details, [field]: value } } : e
        ));
      };

      const handleAddGoal = (goalData) => {
        setGoals(prev => [...prev, { ...goalData, id: Date.now(), completed: false }]);
        setShowGoalModal(false);
      };

      // ============ RENDER ============
      return (
        <div style={styles.container}>
          {/* Header */}
          <header style={styles.header}>
            <div style={styles.logoContainer}>
              <svg width="28" height="28" viewBox="0 0 32 32" fill="none" style={{ marginRight: '8px' }}>
                <path d="M16 26 Q16 18 16 14" stroke="var(--accent)" strokeWidth="2" strokeLinecap="round" fill="none"/>
                <path d="M16 18 Q10 16 8 10 Q14 12 16 18" fill="var(--accent)" opacity="0.5"/>
                <path d="M16 14 Q22 10 24 4 Q18 8 16 14" fill="var(--accent)"/>
                <path d="M16 10 Q14 6 16 2 Q18 6 16 10" fill="var(--accent)" opacity="0.7"/>
              </svg>
              <h1 style={styles.logoText}>tend</h1>
            </div>
            <p style={styles.tagline}>a space for designing your life with intention</p>
          </header>

          {/* Main Content */}
          <main style={styles.main}>
            {/* Left Sidebar */}
            <aside style={styles.sidebar}>
              <div style={styles.tabs}>
                {['events', 'notes', 'goals'].map(tab => (
                  <button
                    key={tab}
                    style={{...styles.tab, ...(activeTab === tab && styles.tabActive)}}
                    onClick={() => setActiveTab(tab)}
                  >
                    {tab.charAt(0).toUpperCase() + tab.slice(1)}
                  </button>
                ))}
              </div>

              <div style={styles.tabContent}>
                {activeTab === 'events' && (
                  <EventsTab
                    events={events}
                    expandedEvent={expandedEvent}
                    setExpandedEvent={setExpandedEvent}
                    onUpdateDetails={handleUpdateEventDetails}
                    onDelete={(id) => setEvents(events.filter(e => e.id !== id))}
                    onAdd={() => setShowEventModal(true)}
                    revealed={revealed}
                  />
                )}
                {activeTab === 'notes' && (
                  <NotesTab notes={notes} setNotes={setNotes} revealed={revealed} />
                )}
                {activeTab === 'goals' && (
                  <GoalsTab
                    goals={goals}
                    setGoals={setGoals}
                    onAdd={() => setShowGoalModal(true)}
                    revealed={revealed}
                  />
                )}
              </div>
            </aside>

            {/* Center Panel */}
            <div style={styles.centerPanel}>
              {/* View Switcher */}
              <div style={styles.viewSwitcher}>
                {[
                  { id: CENTER_VIEWS.YEAR, label: 'Year' },
                  { id: CENTER_VIEWS.SEASONS, label: 'Seasons' },
                  { id: CENTER_VIEWS.MONTHLY, label: 'Monthly' },
                ].map(view => (
                  <button
                    key={view.id}
                    style={{
                      ...styles.viewButton,
                      ...(centerView === view.id && styles.viewButtonActive),
                    }}
                    onClick={() => {
                      setCenterView(view.id);
                      if (view.id !== CENTER_VIEWS.MONTHLY) setSelectedMonth(null);
                    }}
                  >
                    {view.label}
                  </button>
                ))}
              </div>

              {/* Center Views */}
              {centerView === CENTER_VIEWS.YEAR && (
                <YearCircleView 
                  values={values}
                  events={events}
                  revealed={revealed}
                  onAddEvent={() => setShowEventModal(true)}
                />
              )}
              {centerView === CENTER_VIEWS.SEASONS && (
                <SeasonsView 
                  seasonIntentions={seasonIntentions}
                  setSeasonIntentions={setSeasonIntentions}
                  revealed={revealed}
                />
              )}
              {centerView === CENTER_VIEWS.MONTHLY && (
                <MonthlyView 
                  events={events}
                  selectedMonth={selectedMonth}
                  setSelectedMonth={setSelectedMonth}
                  revealed={revealed}
                  onAddEvent={() => setShowEventModal(true)}
                />
              )}

              {/* Values & Life Areas */}
              <div style={{...styles.bottomSection, opacity: revealed ? 1 : 0.4}}>
                <div style={styles.valuesSection}>
                  <h3 style={styles.sectionLabel}>Values</h3>
                  <div style={styles.valuesTags}>
                    {values.map(v => (
                      <span key={v} style={styles.valueTag} className="fade-in">
                        {v}
                        {revealed && (
                          <button style={styles.valueRemove} onClick={() => setValues(values.filter(x => x !== v))}>√ó</button>
                        )}
                      </span>
                    ))}
                    {revealed && values.length < 4 && (
                      <button style={styles.addValueButton} onClick={() => {
                        const v = prompt('Add a value:');
                        if (v && !values.includes(v)) setValues([...values, v]);
                      }}>+ Add</button>
                    )}
                    {values.length === 0 && !revealed && (
                      <span style={styles.placeholderText}>Values will appear as you share...</span>
                    )}
                  </div>
                </div>
                
                <div style={styles.lifeAreasSection}>
                  <h3 style={styles.sectionLabel}>Life Areas</h3>
                  <div style={styles.lifeAreasGrid}>
                    {Object.entries(LIFE_AREAS).map(([key, area]) => (
                      <div key={key} style={styles.lifeAreaItem}>
                        <div style={styles.lifeAreaHeader}>
                          <span style={{color: area.color}}>{area.icon}</span>
                          <span style={styles.lifeAreaName}>{area.name.split(' ')[0]}</span>
                        </div>
                        {revealed ? (
                          <input
                            type="range"
                            min="1"
                            max="10"
                            value={lifeAreaRatings[key]}
                            onChange={(e) => setLifeAreaRatings({...lifeAreaRatings, [key]: parseInt(e.target.value)})}
                            style={{...styles.slider, accentColor: area.color}}
                          />
                        ) : (
                          <div style={styles.sliderPlaceholder}></div>
                        )}
                        <span style={{...styles.lifeAreaRating, color: area.color}}>
                          {revealed ? lifeAreaRatings[key] : '‚Äì'}
                        </span>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            </div>

            {/* Right - Chat */}
            <div style={styles.chatPanel}>
              <div style={styles.chatMessages}>
                {messages.map((msg, idx) => (
                  <ChatMessage key={idx} message={msg} />
                ))}
                {isTyping && <TypingIndicator />}
                <div ref={messagesEndRef} />
              </div>
              
              <div style={styles.chatInputArea}>
                {!revealed && phase === PHASES.EXPLORE && (
                  <button style={styles.skipButton} onClick={handleSkip}>Skip to planning ‚Üí</button>
                )}
                <div style={styles.inputRow}>
                  <textarea
                    style={styles.chatInput}
                    value={inputValue}
                    onChange={(e) => setInputValue(e.target.value)}
                    onKeyDown={(e) => {
                      if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        handleSendMessage();
                      }
                    }}
                    placeholder={revealed ? "Ask me to help plan an event..." : "Share what's on your mind..."}
                    rows={2}
                  />
                  <button 
                    style={{...styles.sendButton, ...(inputValue.trim() ? {} : styles.sendButtonDisabled)}}
                    onClick={handleSendMessage}
                    disabled={!inputValue.trim()}
                  >‚Üë</button>
                </div>
              </div>
            </div>
          </main>

          {/* Modals */}
          {showEventModal && <EventModal onClose={() => setShowEventModal(false)} onAdd={handleAddEvent} />}
          {showGoalModal && <GoalModal onClose={() => setShowGoalModal(false)} onAdd={handleAddGoal} />}
        </div>
      );
    }

    // ============ YEAR CIRCLE VIEW ============
    function YearCircleView({ values, events, revealed, onAddEvent }) {
      const size = 400;
      const center = size / 2;
      const outerRadius = 175;
      const innerRadius = 70;
      const monthRadius = 145;

      const currentMonth = new Date().getMonth();

      const getMonthPosition = (monthIndex) => {
        const angle = ((monthIndex - 2) / 12) * 2 * Math.PI - Math.PI / 2;
        return {
          x: center + Math.cos(angle) * monthRadius,
          y: center + Math.sin(angle) * monthRadius,
        };
      };

      const getEventPosition = (monthIndex, eventIndex = 0) => {
        const angle = ((monthIndex - 2) / 12) * 2 * Math.PI - Math.PI / 2;
        const radius = innerRadius + 18 + (eventIndex * 12);
        return {
          x: center + Math.cos(angle) * radius,
          y: center + Math.sin(angle) * radius,
        };
      };

      const polarToCartesian = (centerX, centerY, radius, angleInDegrees) => {
        const angleInRadians = (angleInDegrees - 90) * Math.PI / 180.0;
        return { x: centerX + radius * Math.cos(angleInRadians), y: centerY + radius * Math.sin(angleInRadians) };
      };

      const describeArc = (startAngle, endAngle, radius) => {
        const start = polarToCartesian(center, center, radius, endAngle);
        const end = polarToCartesian(center, center, radius, startAngle);
        const largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";
        return `M ${start.x} ${start.y} A ${radius} ${radius} 0 ${largeArcFlag} 0 ${end.x} ${end.y} L ${center} ${center} Z`;
      };

      const seasonArcs = [
        { id: 'winter', start: -60, end: 30, color: '#5B9BD5' },
        { id: 'spring', start: 30, end: 120, color: '#6BBF59' },
        { id: 'summer', start: 120, end: 210, color: '#F4B942' },
        { id: 'fall', start: 210, end: 300, color: '#D66B4B' },
      ];

      const hasValues = values.length > 0;
      const yearY = hasValues ? center - 12 : center;

      return (
        <div style={styles.circleContainer}>
          <svg width={size} height={size} viewBox={`0 0 ${size} ${size}`}>
            {/* Season arcs - more opaque */}
            {seasonArcs.map(season => (
              <path key={season.id} d={describeArc(season.start, season.end, outerRadius)} fill={season.color} opacity={0.75} />
            ))}

            {/* Inner circle */}
            <circle cx={center} cy={center} r={innerRadius} fill="var(--bg-card)" stroke="var(--border)" strokeWidth="1" />

            {/* Year */}
            <text x={center} y={yearY} textAnchor="middle" dominantBaseline="middle" fill="var(--text)"
              style={{ fontFamily: "'Fraunces', serif", fontSize: '1.875rem', transition: 'all 0.5s ease' }}>
              2026
            </text>

            {/* Values */}
            {hasValues && (
              <text x={center} y={center + 16} textAnchor="middle" dominantBaseline="middle" fill="var(--text-muted)"
                style={{ fontFamily: "'DM Sans', sans-serif", fontSize: '0.6rem', letterSpacing: '0.02em' }} className="fade-in">
                {values.slice(0, 3).join('  ¬∑  ')}
              </text>
            )}

            {/* Month labels */}
            {MONTHS.map((month, idx) => {
              const pos = getMonthPosition(idx);
              const isCurrent = idx === currentMonth;
              return (
                <g key={month}>
                  <text x={pos.x} y={pos.y} textAnchor="middle" dominantBaseline="middle"
                    fill={isCurrent ? 'var(--text)' : 'var(--text-light)'}
                    style={{ fontFamily: "'DM Sans', sans-serif", fontSize: '0.7rem', fontWeight: isCurrent ? 600 : 400 }}>
                    {month}
                  </text>
                  {isCurrent && <circle cx={pos.x} cy={pos.y + 10} r="2" fill="var(--accent)" />}
                </g>
              );
            })}

            {/* Events */}
            {events.map((event) => {
              const monthEvents = events.filter(e => e.month === event.month);
              const eventIndex = monthEvents.indexOf(event);
              const pos = getEventPosition(event.month, eventIndex);
              const color = LIFE_AREAS[event.lifeArea]?.color || 'var(--accent)';
              return (
                <g key={event.id} className="fade-in">
                  <circle cx={pos.x} cy={pos.y} r="6" fill={color} />
                  <circle cx={pos.x} cy={pos.y} r="2.5" fill="white" opacity="0.5" />
                </g>
              );
            })}
          </svg>

          {revealed && (
            <button style={styles.circleAddButton} onClick={onAddEvent}>+ Add Event</button>
          )}
        </div>
      );
    }

    // ============ SEASONS VIEW ============
    function SeasonsView({ seasonIntentions, setSeasonIntentions, revealed }) {
      const seasons = [
        { id: 'winter', name: 'Winter', months: 'Dec ‚Äì Feb', color: '#5B9BD5' },
        { id: 'spring', name: 'Spring', months: 'Mar ‚Äì May', color: '#6BBF59' },
        { id: 'summer', name: 'Summer', months: 'Jun ‚Äì Aug', color: '#F4B942' },
        { id: 'fall', name: 'Fall', months: 'Sep ‚Äì Nov', color: '#D66B4B' },
      ];

      const currentSeason = (() => {
        const month = new Date().getMonth();
        if ([11, 0, 1].includes(month)) return 'winter';
        if ([2, 3, 4].includes(month)) return 'spring';
        if ([5, 6, 7].includes(month)) return 'summer';
        return 'fall';
      })();

      if (!revealed) {
        return (
          <div style={styles.seasonsPlaceholder}>
            <p style={styles.placeholderText}>Set intentions for each season after you share what matters to you.</p>
          </div>
        );
      }

      return (
        <div style={styles.seasonsContainer}>
          <div style={styles.seasonsGrid}>
            {seasons.map(season => (
              <div 
                key={season.id} 
                style={{
                  ...styles.seasonCard,
                  borderColor: season.id === currentSeason ? season.color : 'var(--border)',
                  borderWidth: season.id === currentSeason ? '2px' : '1px',
                }}
              >
                <div style={styles.seasonCardHeader}>
                  <div style={{...styles.seasonColorDot, backgroundColor: season.color}}></div>
                  <div>
                    <h3 style={{...styles.seasonName, color: season.color}}>{season.name}</h3>
                    <span style={styles.seasonMonths}>{season.months}</span>
                  </div>
                  {season.id === currentSeason && <span style={styles.currentBadge}>Now</span>}
                </div>
                <textarea
                  style={styles.seasonTextarea}
                  value={seasonIntentions[season.id] || ''}
                  onChange={(e) => setSeasonIntentions({...seasonIntentions, [season.id]: e.target.value})}
                  placeholder={`How do you want ${season.name.toLowerCase()} to feel? What do you want to focus on?`}
                  rows={3}
                />
              </div>
            ))}
          </div>
        </div>
      );
    }

    // ============ MONTHLY VIEW ============
    function MonthlyView({ events, selectedMonth, setSelectedMonth, revealed, onAddEvent }) {
      const year = 2026;

      if (!revealed) {
        return (
          <div style={styles.monthlyPlaceholder}>
            <p style={styles.placeholderText}>Your monthly calendar will appear here.</p>
          </div>
        );
      }

      // If no month selected, show all months grid
      if (selectedMonth === null) {
        return (
          <div style={styles.monthsOverview}>
            <div style={styles.monthsGrid}>
              {MONTHS.map((month, idx) => {
                const monthEvents = events.filter(e => e.month === idx);
                return (
                  <div 
                    key={idx} 
                    style={styles.monthCard}
                    onClick={() => setSelectedMonth(idx)}
                  >
                    <span style={styles.monthCardName}>{month}</span>
                    {monthEvents.length > 0 && (
                      <div style={styles.monthCardDots}>
                        {monthEvents.slice(0, 3).map((e, i) => (
                          <span key={i} style={{...styles.monthCardDot, backgroundColor: LIFE_AREAS[e.lifeArea]?.color}}></span>
                        ))}
                      </div>
                    )}
                  </div>
                );
              })}
            </div>
            <button style={styles.circleAddButton} onClick={onAddEvent}>+ Add Event</button>
          </div>
        );
      }

      // Single month view
      const daysInMonth = new Date(year, selectedMonth + 1, 0).getDate();
      const firstDayOfMonth = new Date(year, selectedMonth, 1).getDay();
      const monthEvents = events.filter(e => e.month === selectedMonth);

      return (
        <div style={styles.singleMonthView}>
          <div style={styles.monthHeader}>
            <button style={styles.backButton} onClick={() => setSelectedMonth(null)}>‚Üê All Months</button>
            <div style={styles.monthNavigation}>
              <button style={styles.monthNavBtn} onClick={() => setSelectedMonth(selectedMonth === 0 ? 11 : selectedMonth - 1)}>‚Äπ</button>
              <h2 style={styles.monthTitle}>{MONTH_FULL[selectedMonth]}</h2>
              <button style={styles.monthNavBtn} onClick={() => setSelectedMonth(selectedMonth === 11 ? 0 : selectedMonth + 1)}>‚Ä∫</button>
            </div>
          </div>

          <div style={styles.calendarGrid}>
            {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map((day, i) => (
              <div key={i} style={styles.calendarDayHeader}>{day}</div>
            ))}
            {Array.from({ length: firstDayOfMonth }, (_, i) => (
              <div key={`empty-${i}`} style={styles.calendarDayEmpty}></div>
            ))}
            {Array.from({ length: daysInMonth }, (_, i) => {
              const day = i + 1;
              const isToday = selectedMonth === new Date().getMonth() && day === new Date().getDate();
              return (
                <div key={day} style={{...styles.calendarDay, ...(isToday && styles.calendarDayToday)}}>
                  {day}
                </div>
              );
            })}
          </div>

          {monthEvents.length > 0 && (
            <div style={styles.monthEventsList}>
              <h4 style={styles.monthEventsTitle}>Events This Month</h4>
              {monthEvents.map(event => (
                <div key={event.id} style={styles.monthEventItem}>
                  <span style={{...styles.eventDot, backgroundColor: LIFE_AREAS[event.lifeArea]?.color}}></span>
                  <span>{event.title}</span>
                </div>
              ))}
            </div>
          )}

          <button style={styles.circleAddButton} onClick={onAddEvent}>+ Add Event</button>
        </div>
      );
    }

    // ============ EVENTS TAB ============
    function EventsTab({ events, expandedEvent, setExpandedEvent, onUpdateDetails, onDelete, onAdd, revealed }) {
      if (!revealed) {
        return <div style={styles.tabPlaceholder}><p style={styles.placeholderText}>Your events will appear here.</p></div>;
      }

      return (
        <div style={styles.eventsTab}>
          <button style={styles.addItemButton} onClick={onAdd}>+ Add Event</button>
          
          {events.length === 0 ? (
            <p style={styles.emptyText}>No events yet.</p>
          ) : (
            <div style={styles.eventsList}>
              {events.map(event => (
                <div key={event.id} style={styles.eventCard}>
                  <div style={styles.eventHeader} onClick={() => setExpandedEvent(expandedEvent === event.id ? null : event.id)}>
                    <div style={styles.eventHeaderLeft}>
                      <span style={{...styles.eventDot, backgroundColor: LIFE_AREAS[event.lifeArea]?.color}}></span>
                      <span style={styles.eventMonth}>{MONTHS[event.month]}</span>
                      <span style={styles.eventTitle}>{event.title}</span>
                    </div>
                    <span style={styles.expandIcon}>{expandedEvent === event.id ? '‚àí' : '+'}</span>
                  </div>
                  
                  {expandedEvent === event.id && (
                    <div style={styles.eventDetails} className="slide-in">
                      {['flights', 'stays', 'activities', 'notes'].map(field => (
                        <div key={field} style={styles.detailField}>
                          <label style={styles.detailLabel}>
                            {field === 'flights' ? '‚úà' : field === 'stays' ? 'üè†' : field === 'activities' ? '‚≠ê' : 'üìù'} {field.charAt(0).toUpperCase() + field.slice(1)}
                          </label>
                          <textarea
                            style={styles.detailInput}
                            value={event.details?.[field] || ''}
                            onChange={(e) => onUpdateDetails(event.id, field, e.target.value)}
                            placeholder={`Add ${field}...`}
                            rows={2}
                          />
                        </div>
                      ))}
                      <button style={styles.deleteEventButton} onClick={() => onDelete(event.id)}>Delete event</button>
                    </div>
                  )}
                </div>
              ))}
            </div>
          )}
          
          <p style={styles.tipText}>üí° Ask the AI to suggest activities or places</p>
        </div>
      );
    }

    // ============ NOTES TAB ============
    function NotesTab({ notes, setNotes, revealed }) {
      if (!revealed) {
        return <div style={styles.tabPlaceholder}><p style={styles.placeholderText}>A space for your thoughts and reflections.</p></div>;
      }
      return (
        <div style={styles.notesTab}>
          <textarea style={styles.notesTextarea} value={notes} onChange={(e) => setNotes(e.target.value)} placeholder="Brain dumps, reflections, ideas..." />
        </div>
      );
    }

    // ============ GOALS TAB ============
    function GoalsTab({ goals, setGoals, onAdd, revealed }) {
      if (!revealed) {
        return <div style={styles.tabPlaceholder}><p style={styles.placeholderText}>Your goals will live here.</p></div>;
      }

      return (
        <div style={styles.goalsTab}>
          <button style={styles.addItemButton} onClick={onAdd}>+ Add Goal</button>
          {goals.length === 0 ? (
            <p style={styles.emptyText}>No goals yet.</p>
          ) : (
            <div style={styles.goalsList}>
              {goals.map(goal => (
                <div key={goal.id} style={{...styles.goalCard, opacity: goal.completed ? 0.6 : 1}}>
                  <button
                    style={{...styles.goalCheck, backgroundColor: goal.completed ? 'var(--accent)' : 'transparent'}}
                    onClick={() => setGoals(goals.map(g => g.id === goal.id ? {...g, completed: !g.completed} : g))}
                  >{goal.completed && '‚úì'}</button>
                  <span style={{...styles.goalText, textDecoration: goal.completed ? 'line-through' : 'none'}}>{goal.text}</span>
                  <button style={styles.goalDelete} onClick={() => setGoals(goals.filter(g => g.id !== goal.id))}>√ó</button>
                </div>
              ))}
            </div>
          )}
        </div>
      );
    }

    // ============ CHAT ============
    function ChatMessage({ message }) {
      const isAssistant = message.role === 'assistant';
      return (
        <div style={{...styles.chatMessage, justifyContent: isAssistant ? 'flex-start' : 'flex-end'}} className="fade-in">
          {isAssistant && <div style={styles.chatAvatar}><span style={styles.chatAvatarText}>T</span></div>}
          <div style={{...styles.chatBubble, ...(isAssistant ? styles.chatBubbleAssistant : styles.chatBubbleUser)}}>
            <div dangerouslySetInnerHTML={{ __html: message.content.replace(/\n/g, '<br/>') }} />
          </div>
        </div>
      );
    }

    function TypingIndicator() {
      return (
        <div style={styles.chatMessage} className="fade-in">
          <div style={styles.chatAvatar}><span style={styles.chatAvatarText}>T</span></div>
          <div style={styles.typingBubble}>
            <span style={{...styles.typingDot, animationDelay: '0s'}}>‚Ä¢</span>
            <span style={{...styles.typingDot, animationDelay: '0.15s'}}>‚Ä¢</span>
            <span style={{...styles.typingDot, animationDelay: '0.3s'}}>‚Ä¢</span>
          </div>
        </div>
      );
    }

    // ============ MODALS ============
    function EventModal({ onClose, onAdd }) {
      const [title, setTitle] = useState('');
      const [month, setMonth] = useState(new Date().getMonth());
      const [lifeArea, setLifeArea] = useState('fun');

      return (
        <div style={styles.modalOverlay} onClick={onClose}>
          <div style={styles.modal} onClick={e => e.stopPropagation()} className="fade-in">
            <div style={styles.modalHeader}>
              <h3 style={styles.modalTitle}>Add an event</h3>
              <button style={styles.modalClose} onClick={onClose}>√ó</button>
            </div>
            <form onSubmit={(e) => { e.preventDefault(); if (title) onAdd({ title, month, lifeArea }); }} style={styles.modalForm}>
              <div style={styles.formField}>
                <label style={styles.formLabel}>What is it?</label>
                <input type="text" style={styles.textInput} value={title} onChange={(e) => setTitle(e.target.value)} placeholder="Trip, birthday, deadline..." autoFocus />
              </div>
              <div style={styles.formField}>
                <label style={styles.formLabel}>When?</label>
                <select style={styles.selectInput} value={month} onChange={(e) => setMonth(parseInt(e.target.value))}>
                  {MONTHS.map((m, i) => <option key={i} value={i}>{m} 2026</option>)}
                </select>
              </div>
              <div style={styles.formField}>
                <label style={styles.formLabel}>Life Area</label>
                <select style={styles.selectInput} value={lifeArea} onChange={(e) => setLifeArea(e.target.value)}>
                  {Object.entries(LIFE_AREAS).map(([key, area]) => (
                    <option key={key} value={key}>{area.icon} {area.name}</option>
                  ))}
                </select>
              </div>
              <button type="submit" style={{...styles.submitButton, ...(!title ? styles.submitButtonDisabled : {})}} disabled={!title}>Add to year</button>
            </form>
          </div>
        </div>
      );
    }

    function GoalModal({ onClose, onAdd }) {
      const [text, setText] = useState('');
      return (
        <div style={styles.modalOverlay} onClick={onClose}>
          <div style={styles.modal} onClick={e => e.stopPropagation()} className="fade-in">
            <div style={styles.modalHeader}>
              <h3 style={styles.modalTitle}>Add a goal</h3>
              <button style={styles.modalClose} onClick={onClose}>√ó</button>
            </div>
            <form onSubmit={(e) => { e.preventDefault(); if (text) onAdd({ text }); }} style={styles.modalForm}>
              <div style={styles.formField}>
                <label style={styles.formLabel}>What do you want to achieve?</label>
                <input type="text" style={styles.textInput} value={text} onChange={(e) => setText(e.target.value)} placeholder="Run a 5K, read 12 books..." autoFocus />
              </div>
              <button type="submit" style={{...styles.submitButton, ...(!text ? styles.submitButtonDisabled : {})}} disabled={!text}>Add goal</button>
            </form>
          </div>
        </div>
      );
    }

    // ============ STYLES ============
    const styles = {
      container: { minHeight: '100vh', display: 'flex', flexDirection: 'column', backgroundColor: 'var(--bg-main)' },
      
      header: { padding: '0.875rem 2rem', borderBottom: '1px solid var(--border)', backgroundColor: 'var(--bg-card)', display: 'flex', alignItems: 'baseline', gap: '1rem' },
      logoContainer: { display: 'flex', alignItems: 'center' },
      logoText: { fontSize: '1.5rem', fontFamily: "'Fraunces', serif", fontWeight: 400, color: 'var(--text)' },
      tagline: { fontSize: '0.85rem', color: 'var(--text-muted)', fontStyle: 'italic' },

      main: { display: 'grid', gridTemplateColumns: '240px 1fr 320px', flex: 1, height: 'calc(100vh - 56px)' },

      // Sidebar
      sidebar: { backgroundColor: 'var(--bg-card)', borderRight: '1px solid var(--border)', display: 'flex', flexDirection: 'column' },
      tabs: { display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', borderBottom: '1px solid var(--border)' },
      tab: { padding: '0.875rem 0.5rem', backgroundColor: 'transparent', border: 'none', borderBottom: '2px solid transparent', color: 'var(--text-muted)', fontSize: '0.75rem', fontWeight: 500, cursor: 'pointer' },
      tabActive: { color: 'var(--text)', borderBottomColor: 'var(--accent)' },
      tabContent: { flex: 1, overflow: 'auto', padding: '1rem' },
      tabPlaceholder: { display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%', padding: '2rem' },
      placeholderText: { color: 'var(--text-muted)', fontSize: '0.85rem', textAlign: 'center', fontStyle: 'italic' },

      // Events
      eventsTab: { display: 'flex', flexDirection: 'column', gap: '1rem' },
      addItemButton: { padding: '0.625rem 1rem', backgroundColor: 'var(--accent)', border: 'none', borderRadius: '8px', color: 'white', fontSize: '0.8rem', cursor: 'pointer', alignSelf: 'flex-start' },
      eventsList: { display: 'flex', flexDirection: 'column', gap: '0.5rem' },
      eventCard: { backgroundColor: 'var(--bg-elevated)', borderRadius: '10px', overflow: 'hidden' },
      eventHeader: { padding: '0.875rem 1rem', display: 'flex', justifyContent: 'space-between', alignItems: 'center', cursor: 'pointer' },
      eventHeaderLeft: { display: 'flex', alignItems: 'center', gap: '0.625rem' },
      eventDot: { width: '8px', height: '8px', borderRadius: '50%' },
      eventMonth: { fontSize: '0.7rem', fontWeight: 600, color: 'var(--text-muted)', textTransform: 'uppercase' },
      eventTitle: { fontSize: '0.875rem', color: 'var(--text)' },
      expandIcon: { color: 'var(--text-muted)', fontSize: '1rem' },
      eventDetails: { padding: '0 1rem 1rem', display: 'flex', flexDirection: 'column', gap: '0.75rem', borderTop: '1px solid var(--border)', paddingTop: '0.875rem' },
      detailField: { display: 'flex', flexDirection: 'column', gap: '0.25rem' },
      detailLabel: { fontSize: '0.7rem', color: 'var(--text-muted)' },
      detailInput: { padding: '0.5rem 0.75rem', backgroundColor: 'var(--bg-card)', border: '1px solid var(--border)', borderRadius: '6px', fontSize: '0.8rem', color: 'var(--text)', fontFamily: "'DM Sans', sans-serif", resize: 'none' },
      deleteEventButton: { padding: '0.5rem', backgroundColor: 'transparent', border: '1px solid var(--border)', borderRadius: '6px', color: 'var(--text-muted)', fontSize: '0.75rem', cursor: 'pointer', marginTop: '0.5rem' },
      emptyText: { color: 'var(--text-muted)', fontSize: '0.85rem', fontStyle: 'italic' },
      tipText: { color: 'var(--text-muted)', fontSize: '0.75rem', marginTop: 'auto', paddingTop: '1rem' },

      // Notes
      notesTab: { height: '100%' },
      notesTextarea: { width: '100%', height: '100%', minHeight: '300px', padding: '1rem', backgroundColor: 'var(--bg-elevated)', border: '1px solid var(--border)', borderRadius: '10px', fontSize: '0.875rem', color: 'var(--text)', fontFamily: "'DM Sans', sans-serif", resize: 'none', lineHeight: 1.7 },

      // Goals
      goalsTab: { display: 'flex', flexDirection: 'column', gap: '1rem' },
      goalsList: { display: 'flex', flexDirection: 'column', gap: '0.5rem' },
      goalCard: { display: 'flex', alignItems: 'center', gap: '0.75rem', padding: '0.75rem 1rem', backgroundColor: 'var(--bg-elevated)', borderRadius: '8px' },
      goalCheck: { width: '20px', height: '20px', borderRadius: '50%', border: '2px solid var(--accent)', display: 'flex', alignItems: 'center', justifyContent: 'center', cursor: 'pointer', color: 'white', fontSize: '0.7rem', flexShrink: 0 },
      goalText: { flex: 1, fontSize: '0.875rem', color: 'var(--text)' },
      goalDelete: { background: 'none', border: 'none', color: 'var(--text-muted)', cursor: 'pointer', fontSize: '1rem', opacity: 0.5 },

      // Center
      centerPanel: { display: 'flex', flexDirection: 'column', alignItems: 'center', padding: '1.25rem', backgroundColor: 'var(--bg-main)', gap: '1.25rem', overflow: 'auto' },
      
      // View Switcher
      viewSwitcher: { display: 'flex', gap: '4px', backgroundColor: 'var(--bg-card)', padding: '4px', borderRadius: '10px', border: '1px solid var(--border)' },
      viewButton: { padding: '0.5rem 1.25rem', backgroundColor: 'transparent', border: 'none', borderRadius: '8px', color: 'var(--text-muted)', fontSize: '0.8rem', fontWeight: 500, cursor: 'pointer' },
      viewButtonActive: { backgroundColor: 'var(--accent)', color: 'white' },

      // Circle
      circleContainer: { display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1rem' },
      circleAddButton: { padding: '0.5rem 1.25rem', backgroundColor: 'var(--accent)', border: 'none', borderRadius: '20px', color: 'white', fontSize: '0.8rem', cursor: 'pointer' },

      // Seasons View
      seasonsPlaceholder: { display: 'flex', alignItems: 'center', justifyContent: 'center', height: '300px' },
      seasonsContainer: { width: '100%', maxWidth: '600px' },
      seasonsGrid: { display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '1rem' },
      seasonCard: { backgroundColor: 'var(--bg-card)', borderRadius: '12px', padding: '1.25rem', border: '1px solid var(--border)' },
      seasonCardHeader: { display: 'flex', alignItems: 'flex-start', gap: '0.75rem', marginBottom: '1rem', position: 'relative' },
      seasonColorDot: { width: '12px', height: '12px', borderRadius: '50%', marginTop: '4px' },
      seasonName: { fontSize: '1.125rem', fontFamily: "'Fraunces', serif", marginBottom: '0.125rem' },
      seasonMonths: { fontSize: '0.75rem', color: 'var(--text-muted)' },
      currentBadge: { position: 'absolute', top: 0, right: 0, fontSize: '0.65rem', backgroundColor: 'var(--accent)', color: 'white', padding: '0.2rem 0.5rem', borderRadius: '8px' },
      seasonTextarea: { width: '100%', padding: '0.75rem', backgroundColor: 'var(--bg-elevated)', border: '1px solid var(--border)', borderRadius: '8px', fontSize: '0.85rem', color: 'var(--text)', fontFamily: "'DM Sans', sans-serif", resize: 'none', lineHeight: 1.6 },

      // Monthly View
      monthlyPlaceholder: { display: 'flex', alignItems: 'center', justifyContent: 'center', height: '300px' },
      monthsOverview: { display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1.5rem' },
      monthsGrid: { display: 'grid', gridTemplateColumns: 'repeat(4, 1fr)', gap: '0.75rem', width: '100%', maxWidth: '500px' },
      monthCard: { backgroundColor: 'var(--bg-card)', borderRadius: '10px', padding: '1rem', border: '1px solid var(--border)', cursor: 'pointer', textAlign: 'center', transition: 'all 0.2s ease' },
      monthCardName: { fontSize: '0.9rem', fontWeight: 500, color: 'var(--text)' },
      monthCardDots: { display: 'flex', justifyContent: 'center', gap: '4px', marginTop: '0.5rem' },
      monthCardDot: { width: '6px', height: '6px', borderRadius: '50%' },

      singleMonthView: { display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1rem', width: '100%', maxWidth: '400px' },
      monthHeader: { display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '0.5rem', width: '100%' },
      backButton: { background: 'none', border: 'none', color: 'var(--text-muted)', fontSize: '0.8rem', cursor: 'pointer', alignSelf: 'flex-start' },
      monthNavigation: { display: 'flex', alignItems: 'center', gap: '1rem' },
      monthNavBtn: { background: 'none', border: 'none', fontSize: '1.5rem', color: 'var(--text-light)', cursor: 'pointer' },
      monthTitle: { fontSize: '1.25rem', fontFamily: "'Fraunces', serif", color: 'var(--text)', minWidth: '120px', textAlign: 'center' },
      calendarGrid: { display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '4px', width: '100%' },
      calendarDayHeader: { padding: '0.5rem', textAlign: 'center', fontSize: '0.7rem', color: 'var(--text-muted)', fontWeight: 500 },
      calendarDayEmpty: { aspectRatio: '1' },
      calendarDay: { aspectRatio: '1', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '0.8rem', color: 'var(--text-light)', backgroundColor: 'var(--bg-card)', borderRadius: '6px', border: '1px solid var(--border)' },
      calendarDayToday: { backgroundColor: 'var(--accent)', color: 'white', fontWeight: 600, border: 'none' },
      monthEventsList: { width: '100%', marginTop: '0.5rem' },
      monthEventsTitle: { fontSize: '0.7rem', color: 'var(--text-muted)', textTransform: 'uppercase', marginBottom: '0.5rem' },
      monthEventItem: { display: 'flex', alignItems: 'center', gap: '0.5rem', padding: '0.5rem 0.75rem', backgroundColor: 'var(--bg-card)', borderRadius: '6px', fontSize: '0.85rem', marginBottom: '0.25rem', border: '1px solid var(--border)' },

      // Bottom Section
      bottomSection: { display: 'grid', gridTemplateColumns: '1fr 2fr', gap: '1.5rem', width: '100%', maxWidth: '600px', padding: '1.25rem', backgroundColor: 'var(--bg-card)', borderRadius: '16px', border: '1px solid var(--border)', transition: 'opacity 0.5s ease' },
      valuesSection: {},
      sectionLabel: { fontSize: '0.7rem', textTransform: 'uppercase', letterSpacing: '0.1em', color: 'var(--text-muted)', marginBottom: '0.75rem', fontFamily: "'DM Sans', sans-serif", fontWeight: 600 },
      valuesTags: { display: 'flex', flexWrap: 'wrap', gap: '0.375rem' },
      valueTag: { display: 'inline-flex', alignItems: 'center', gap: '0.375rem', padding: '0.375rem 0.75rem', backgroundColor: 'var(--accent)', color: 'white', borderRadius: '14px', fontSize: '0.75rem' },
      valueRemove: { background: 'none', border: 'none', color: 'white', opacity: 0.7, cursor: 'pointer', fontSize: '0.875rem', padding: 0, lineHeight: 1 },
      addValueButton: { padding: '0.375rem 0.75rem', backgroundColor: 'transparent', border: '1px dashed var(--border-dark)', borderRadius: '14px', color: 'var(--text-muted)', fontSize: '0.75rem', cursor: 'pointer' },
      lifeAreasSection: {},
      lifeAreasGrid: { display: 'grid', gridTemplateColumns: 'repeat(3, 1fr)', gap: '0.75rem' },
      lifeAreaItem: { display: 'flex', flexDirection: 'column', gap: '0.25rem' },
      lifeAreaHeader: { display: 'flex', alignItems: 'center', gap: '0.375rem', fontSize: '0.7rem' },
      lifeAreaName: { color: 'var(--text-light)', fontSize: '0.7rem' },
      slider: { width: '100%', height: '4px', cursor: 'pointer' },
      sliderPlaceholder: { width: '100%', height: '4px', backgroundColor: 'var(--border)', borderRadius: '2px' },
      lifeAreaRating: { fontSize: '0.8rem', fontWeight: 600, textAlign: 'center' },

      // Chat
      chatPanel: { backgroundColor: 'var(--bg-card)', borderLeft: '1px solid var(--border)', display: 'flex', flexDirection: 'column' },
      chatMessages: { flex: 1, padding: '1.25rem', overflowY: 'auto', display: 'flex', flexDirection: 'column', gap: '0.875rem' },
      chatInputArea: { padding: '1rem 1.25rem 1.25rem', borderTop: '1px solid var(--border)' },
      skipButton: { width: '100%', padding: '0.5rem', marginBottom: '0.75rem', backgroundColor: 'transparent', border: '1px solid var(--border)', borderRadius: '8px', color: 'var(--text-muted)', fontSize: '0.8rem', cursor: 'pointer' },
      inputRow: { display: 'flex', gap: '0.625rem', alignItems: 'flex-end' },
      chatInput: { flex: 1, padding: '0.75rem 1rem', backgroundColor: 'var(--bg-elevated)', border: '1px solid var(--border)', borderRadius: '12px', color: 'var(--text)', fontSize: '0.875rem', fontFamily: "'DM Sans', sans-serif", resize: 'none' },
      sendButton: { width: '40px', height: '40px', borderRadius: '50%', backgroundColor: 'var(--accent)', border: 'none', color: 'white', fontSize: '1rem', cursor: 'pointer', flexShrink: 0 },
      sendButtonDisabled: { backgroundColor: 'var(--border)', cursor: 'not-allowed' },
      chatMessage: { display: 'flex', gap: '0.625rem', alignItems: 'flex-start' },
      chatAvatar: { width: '28px', height: '28px', borderRadius: '50%', backgroundColor: 'var(--accent-light)', border: '1px solid var(--accent)', display: 'flex', alignItems: 'center', justifyContent: 'center', flexShrink: 0 },
      chatAvatarText: { fontFamily: "'Fraunces', serif", fontSize: '0.75rem', color: 'var(--accent)' },
      chatBubble: { padding: '0.75rem 1rem', borderRadius: '14px', maxWidth: '88%', fontSize: '0.875rem', lineHeight: 1.55 },
      chatBubbleAssistant: { backgroundColor: 'var(--bg-elevated)', borderTopLeftRadius: '4px', color: 'var(--text)' },
      chatBubbleUser: { backgroundColor: 'var(--accent)', borderTopRightRadius: '4px', color: 'white' },
      typingBubble: { padding: '0.75rem 1rem', backgroundColor: 'var(--bg-elevated)', borderRadius: '14px', borderTopLeftRadius: '4px', display: 'flex', gap: '4px' },
      typingDot: { color: 'var(--accent)', fontSize: '1.125rem', lineHeight: 1, animation: 'pulse 1s infinite' },

      // Modal
      modalOverlay: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0,0,0,0.4)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000 },
      modal: { backgroundColor: 'var(--bg-card)', borderRadius: '16px', padding: '1.5rem', width: '90%', maxWidth: '360px', border: '1px solid var(--border)' },
      modalHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '1.25rem' },
      modalTitle: { fontSize: '1.125rem', fontFamily: "'Fraunces', serif", color: 'var(--text)' },
      modalClose: { width: '28px', height: '28px', borderRadius: '50%', backgroundColor: 'var(--bg-elevated)', border: 'none', color: 'var(--text-muted)', fontSize: '1rem', cursor: 'pointer' },
      modalForm: { display: 'flex', flexDirection: 'column', gap: '1rem' },
      formField: { display: 'flex', flexDirection: 'column', gap: '0.375rem' },
      formLabel: { fontSize: '0.7rem', color: 'var(--text-muted)', textTransform: 'uppercase', letterSpacing: '0.05em', fontWeight: 500 },
      textInput: { padding: '0.625rem 0.875rem', backgroundColor: 'var(--bg-elevated)', border: '1px solid var(--border)', borderRadius: '8px', color: 'var(--text)', fontSize: '0.875rem', fontFamily: "'DM Sans', sans-serif" },
      selectInput: { padding: '0.625rem 0.875rem', backgroundColor: 'var(--bg-elevated)', border: '1px solid var(--border)', borderRadius: '8px', color: 'var(--text)', fontSize: '0.875rem', fontFamily: "'DM Sans', sans-serif" },
      submitButton: { padding: '0.75rem', backgroundColor: 'var(--accent)', border: 'none', borderRadius: '10px', color: 'white', fontSize: '0.875rem', fontWeight: 500, cursor: 'pointer', marginTop: '0.5rem' },
      submitButtonDisabled: { backgroundColor: 'var(--border-dark)', cursor: 'not-allowed' },
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<TendApp />);
  </script>
</body>
</html>
