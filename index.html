<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tend — Life Design Companion</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,500;1,9..144,300;1,9..144,400&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300;1,400&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-main: #FAF8F5;
      --bg-warm: #F5F1EC;
      --bg-card: #FFFFFF;
      --bg-elevated: #F0EBE4;
      
      --sand: #E8E2D9;
      --sand-dark: #D4CCC0;
      
      --charcoal: #2D2A26;
      --charcoal-light: #6B6660;
      --charcoal-muted: #9A9590;
      
      --sage: #7D9B76;
      --sage-soft: #A8C4A2;
      --sage-light: #E8F0E6;
      
      --terracotta: #C4836A;
      --terracotta-soft: #DDBCAE;
      --terracotta-light: #F5EAE5;
      
      --gold: #C9A66B;
      --gold-soft: #E0CBA3;
      --gold-light: #F7F1E6;
      
      --lavender: #9B8AAE;
      --lavender-soft: #C4B8D0;
      --lavender-light: #F0ECF4;
      
      --sky: #7A9CAD;
      --sky-soft: #A8C4D0;
      --sky-light: #E8F2F5;
      
      --rose: #C48B8B;
      --rose-soft: #DDBCBC;
      --rose-light: #F5EAEA;
    }

    body {
      font-family: 'DM Sans', sans-serif;
      background-color: var(--bg-main);
      color: var(--charcoal);
      line-height: 1.6;
      min-height: 100vh;
      font-weight: 400;
    }

    h1, h2, h3, h4 {
      font-family: 'Fraunces', serif;
      font-weight: 400;
    }

    /* Subtle texture */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0.02;
      pointer-events: none;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
      z-index: 1000;
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--sand-dark);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--charcoal-muted);
    }

    /* Animations */
    @keyframes fadeUp {
      from { 
        opacity: 0; 
        transform: translateY(20px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 0.8; }
    }

    .fade-up {
      animation: fadeUp 0.6s ease-out forwards;
    }

    .fade-in {
      animation: fadeIn 0.4s ease-out forwards;
    }

    /* Selection */
    ::selection {
      background: var(--sage);
      color: white;
    }

    /* Focus states */
    input:focus, textarea:focus {
      border-color: var(--sage) !important;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    // ============ CONSTANTS ============
    const SEASONS = {
      winter: { 
        name: 'Winter', 
        months: ['December', 'January', 'February'],
        color: 'var(--sky)',
        softColor: 'var(--sky-soft)',
        lightColor: 'var(--sky-light)',
        essence: 'rest & reflection',
        icon: '✦'
      },
      spring: { 
        name: 'Spring', 
        months: ['March', 'April', 'May'],
        color: 'var(--sage)',
        softColor: 'var(--sage-soft)',
        lightColor: 'var(--sage-light)',
        essence: 'growth & renewal',
        icon: '❋'
      },
      summer: { 
        name: 'Summer', 
        months: ['June', 'July', 'August'],
        color: 'var(--gold)',
        softColor: 'var(--gold-soft)',
        lightColor: 'var(--gold-light)',
        essence: 'abundance & joy',
        icon: '✺'
      },
      fall: { 
        name: 'Fall', 
        months: ['September', 'October', 'November'],
        color: 'var(--terracotta)',
        softColor: 'var(--terracotta-soft)',
        lightColor: 'var(--terracotta-light)',
        essence: 'harvest & release',
        icon: '✧'
      }
    };

    const EVENT_TYPES = {
      trip: { label: 'Trip', color: 'var(--sky)', lightColor: 'var(--sky-light)', icon: '↗' },
      rest: { label: 'Rest', color: 'var(--sage)', lightColor: 'var(--sage-light)', icon: '◠' },
      dateNight: { label: 'Date Night', color: 'var(--rose)', lightColor: 'var(--rose-light)', icon: '♡' },
      personal: { label: 'Personal', color: 'var(--lavender)', lightColor: 'var(--lavender-light)', icon: '✧' },
      work: { label: 'Work', color: 'var(--charcoal-muted)', lightColor: 'var(--sand)', icon: '▫' },
      partner: { label: "Partner", color: 'var(--gold)', lightColor: 'var(--gold-light)', icon: '◦' },
    };

    const VIEWS = {
      YEAR: 'year',
      SEASON: 'season',
      MONTH: 'month'
    };

    // ============ AI CONVERSATION FLOWS ============
    const AI_FLOWS = {
      year: {
        initial: "Hi, I'm Tend. Let's take a moment to think about the year ahead.\n\nBefore we get into schedules and logistics, I'd love to know: What do you want this year to feel like? And is there a central theme or goal you want to organize it around?",
        followUps: [
          "That resonates. If that's your north star, what would need to be true by December for you to feel like you lived into it? Any milestones or experiences that come to mind?",
          "And on a practical level—what are the big commitments you already know about? Work trips, weddings, anything already on the calendar?",
          "One more thing: What do you want to protect this year? What tends to get squeezed out when life gets busy that you want to be more intentional about?",
          "This is a beautiful foundation. Let's move into the seasons and see how this plays out across the year."
        ]
      },
      season: {
        winter: {
          initial: "Let's look at Winter—December through February.\n\nThis season often brings holidays, end-of-year reflection, and a natural slowdown. What do you want from this winter? Any specific goals, trips, or experiences you want to make space for?",
          followUps: [
            "How do you want to navigate the holidays this year? Any boundaries you want to set or traditions you want to prioritize?",
            "Is there anything you want to start or finish during these quieter months?"
          ]
        },
        spring: {
          initial: "Now Spring—March through May.\n\nEnergy tends to pick up. It's a natural time for new beginnings and momentum. What do you want to focus on this spring? Any projects, habits, or goals you want to get moving?",
          followUps: [
            "Spring often brings a burst of motivation. How do you want to channel that without overcommitting?",
            "Any trips or experiences you want to plan while the weather shifts?"
          ]
        },
        summer: {
          initial: "Summer—June through August.\n\nLonger days, more flexibility for many people. This is often the season for adventure, travel, and being out in the world. What do you want your summer to look like? Any trips, goals, or experiences you're dreaming about?",
          followUps: [
            "Summer can fill up fast. Is there anything you want to protect—downtime, a specific trip, quality time with someone?",
            "What would make this summer feel memorable rather than just busy?"
          ]
        },
        fall: {
          initial: "And Fall—September through November.\n\nA return to rhythm for many people. It's a good season for building routines and bringing things to completion. What do you want to focus on this fall? Any goals you want to hit before year-end?",
          followUps: [
            "Fall often feels like a fresh start. Any habits or routines you want to establish?",
            "As the year winds down, is there anything you want to make sure you complete or celebrate?"
          ]
        }
      },
      month: {
        initial: "Now let's get into the details.\n\nLooking at this month specifically—what's already on your plate? And what do you want to make sure doesn't slip through the cracks?",
        followUps: [
          "Where's the breathing room? Do you have enough white space, or does this feel packed?",
          "Is there something you've been meaning to schedule but haven't? Let's get it on the timeline.",
          "How does this month connect to your bigger goals for the season?"
        ]
      }
    };

    // ============ MAIN APP ============
    function TendApp() {
      const [currentView, setCurrentView] = useState(VIEWS.YEAR);
      const [currentSeason, setCurrentSeason] = useState('winter');
      const [yearTheme, setYearTheme] = useState('');
      const [events, setEvents] = useState([]);
      const [messages, setMessages] = useState([]);
      const [inputValue, setInputValue] = useState('');
      const [isTyping, setIsTyping] = useState(false);
      const [messageIndex, setMessageIndex] = useState(0);
      const [showEventModal, setShowEventModal] = useState(false);
      const messagesEndRef = useRef(null);

      useEffect(() => {
        setMessages([{ role: 'assistant', content: AI_FLOWS.year.initial }]);
      }, []);

      useEffect(() => {
        messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
      }, [messages]);

      const handleSendMessage = () => {
        if (!inputValue.trim()) return;

        const userMessage = { role: 'user', content: inputValue };
        setMessages(prev => [...prev, userMessage]);
        setInputValue('');
        setIsTyping(true);

        setTimeout(() => {
          let response;
          if (currentView === VIEWS.YEAR) {
            response = AI_FLOWS.year.followUps[Math.min(messageIndex, AI_FLOWS.year.followUps.length - 1)];
          } else if (currentView === VIEWS.SEASON) {
            const seasonFlow = AI_FLOWS.season[currentSeason];
            response = seasonFlow.followUps[Math.min(messageIndex, seasonFlow.followUps.length - 1)];
          } else {
            response = AI_FLOWS.month.followUps[Math.min(messageIndex, AI_FLOWS.month.followUps.length - 1)];
          }
          
          setMessages(prev => [...prev, { role: 'assistant', content: response }]);
          setMessageIndex(prev => prev + 1);
          setIsTyping(false);
        }, 1200);
      };

      const progressToSeason = () => {
        setCurrentView(VIEWS.SEASON);
        setMessageIndex(0);
        const seasonFlow = AI_FLOWS.season[currentSeason];
        setMessages([{ role: 'assistant', content: seasonFlow.initial }]);
      };

      const progressToNextSeason = () => {
        const seasonOrder = ['winter', 'spring', 'summer', 'fall'];
        const currentIndex = seasonOrder.indexOf(currentSeason);
        if (currentIndex < seasonOrder.length - 1) {
          const nextSeason = seasonOrder[currentIndex + 1];
          setCurrentSeason(nextSeason);
          setMessageIndex(0);
          const seasonFlow = AI_FLOWS.season[nextSeason];
          setMessages([{ role: 'assistant', content: seasonFlow.initial }]);
        } else {
          progressToMonth();
        }
      };

      const progressToMonth = () => {
        setCurrentView(VIEWS.MONTH);
        setMessageIndex(0);
        setMessages([{ role: 'assistant', content: AI_FLOWS.month.initial }]);
      };

      const selectSeason = (season) => {
        setCurrentSeason(season);
        setCurrentView(VIEWS.SEASON);
        setMessageIndex(0);
        const seasonFlow = AI_FLOWS.season[season];
        setMessages([{ role: 'assistant', content: seasonFlow.initial }]);
      };

      const handleAddEvent = (eventData) => {
        setEvents(prev => [...prev, { ...eventData, id: Date.now() }]);
        setShowEventModal(false);
      };

      const handleDeleteEvent = (eventId) => {
        setEvents(prev => prev.filter(e => e.id !== eventId));
      };

      return (
        <div style={styles.container}>
          {/* Header */}
          <header style={styles.header}>
            <div style={styles.logoContainer}>
              <h1 style={styles.logo}>tend</h1>
            </div>
            <nav style={styles.nav}>
              <button 
                style={{
                  ...styles.navButton,
                  ...(currentView === VIEWS.YEAR && styles.navButtonActive)
                }}
                onClick={() => {
                  setCurrentView(VIEWS.YEAR);
                  setMessages([{ role: 'assistant', content: AI_FLOWS.year.initial }]);
                  setMessageIndex(0);
                }}
              >
                Year
              </button>
              <button 
                style={{
                  ...styles.navButton,
                  ...(currentView === VIEWS.SEASON && styles.navButtonActive)
                }}
                onClick={() => progressToSeason()}
              >
                Season
              </button>
              <button 
                style={{
                  ...styles.navButton,
                  ...(currentView === VIEWS.MONTH && styles.navButtonActive)
                }}
                onClick={() => progressToMonth()}
              >
                Month
              </button>
            </nav>
          </header>

          {/* Main Content */}
          <main style={styles.main}>
            {/* Visualization Panel */}
            <div style={styles.vizPanel}>
              {currentView === VIEWS.YEAR && <YearView onSelectSeason={selectSeason} />}
              {currentView === VIEWS.SEASON && (
                <SeasonView 
                  currentSeason={currentSeason} 
                  onNextSeason={progressToNextSeason}
                  onSelectSeason={selectSeason}
                />
              )}
              {currentView === VIEWS.MONTH && (
                <MonthView 
                  events={events}
                  onAddEvent={() => setShowEventModal(true)}
                  onDeleteEvent={handleDeleteEvent}
                />
              )}
            </div>

            {/* Chat Panel */}
            <div style={styles.chatPanel}>
              <div style={styles.chatMessages}>
                {messages.map((msg, idx) => (
                  <ChatMessage key={idx} message={msg} />
                ))}
                {isTyping && <TypingIndicator />}
                <div ref={messagesEndRef} />
              </div>
              
              <div style={styles.chatInputArea}>
                <textarea
                  style={styles.chatInput}
                  value={inputValue}
                  onChange={(e) => setInputValue(e.target.value)}
                  onKeyDown={(e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                      e.preventDefault();
                      handleSendMessage();
                    }
                  }}
                  placeholder="Share what's on your mind..."
                  rows={3}
                />
                <div style={styles.chatActions}>
                  {currentView === VIEWS.YEAR && messageIndex >= 2 && (
                    <button style={styles.progressButton} onClick={progressToSeason}>
                      Continue to Seasons →
                    </button>
                  )}
                  {currentView === VIEWS.SEASON && messageIndex >= 1 && (
                    <button style={styles.progressButton} onClick={progressToNextSeason}>
                      {currentSeason === 'fall' ? 'Continue to Month →' : 'Next Season →'}
                    </button>
                  )}
                  <button 
                    style={{
                      ...styles.sendButton,
                      ...(inputValue.trim() ? {} : styles.sendButtonDisabled)
                    }}
                    onClick={handleSendMessage}
                    disabled={!inputValue.trim()}
                  >
                    ↑
                  </button>
                </div>
              </div>
            </div>
          </main>

          {/* Event Modal */}
          {showEventModal && (
            <EventModal 
              onClose={() => setShowEventModal(false)}
              onAdd={handleAddEvent}
            />
          )}
        </div>
      );
    }

    // ============ YEAR VIEW ============
    function YearView({ onSelectSeason }) {
      const year = new Date().getFullYear();
      
      return (
        <div style={styles.yearView} className="fade-up">
          <div style={styles.yearHeader}>
            <span style={styles.yearLabel}>Planning</span>
            <h2 style={styles.yearNumber}>{year}</h2>
          </div>
          
          <div style={styles.yearGrid}>
            {Object.entries(SEASONS).map(([key, season], idx) => (
              <button 
                key={key}
                style={{
                  ...styles.seasonCard,
                  animationDelay: `${idx * 0.1}s`,
                  borderColor: season.softColor,
                }}
                className="fade-up"
                onClick={() => onSelectSeason(key)}
              >
                <span style={{...styles.seasonCardIcon, color: season.color}}>{season.icon}</span>
                <h3 style={{...styles.seasonCardName, color: season.color}}>{season.name}</h3>
                <p style={styles.seasonCardEssence}>{season.essence}</p>
                <div style={styles.seasonCardMonths}>
                  {season.months.map(month => (
                    <span key={month} style={styles.seasonCardMonth}>{month.slice(0, 3)}</span>
                  ))}
                </div>
              </button>
            ))}
          </div>

          <p style={styles.yearHint}>
            Click a season to explore, or chat with Tend to start designing your year.
          </p>
        </div>
      );
    }

    // ============ SEASON VIEW ============
    function SeasonView({ currentSeason, onNextSeason, onSelectSeason }) {
      const season = SEASONS[currentSeason];
      const seasonOrder = ['winter', 'spring', 'summer', 'fall'];
      
      return (
        <div style={styles.seasonView} className="fade-up">
          {/* Season tabs */}
          <div style={styles.seasonTabs}>
            {seasonOrder.map(key => (
              <button
                key={key}
                style={{
                  ...styles.seasonTab,
                  ...(currentSeason === key && {
                    backgroundColor: SEASONS[key].lightColor,
                    color: SEASONS[key].color,
                    borderColor: SEASONS[key].color,
                  })
                }}
                onClick={() => onSelectSeason(key)}
              >
                {SEASONS[key].name}
              </button>
            ))}
          </div>

          <div style={styles.seasonContent}>
            <div style={styles.seasonHeader}>
              <span style={{...styles.seasonIcon, color: season.color}}>{season.icon}</span>
              <h2 style={{...styles.seasonName, color: season.color}}>{season.name}</h2>
              <p style={styles.seasonEssence}>{season.essence}</p>
            </div>
            
            <div style={styles.seasonMonths}>
              {season.months.map((month, idx) => (
                <div 
                  key={month} 
                  style={{
                    ...styles.seasonMonth,
                    backgroundColor: season.lightColor,
                    borderColor: season.softColor,
                  }}
                  className="fade-up"
                >
                  <span style={styles.seasonMonthName}>{month}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      );
    }

    // ============ MONTH VIEW ============
    function MonthView({ events, onAddEvent, onDeleteEvent }) {
      const now = new Date();
      const currentMonth = now.getMonth();
      const currentYear = now.getFullYear();
      const monthName = ['January', 'February', 'March', 'April', 'May', 'June', 
                         'July', 'August', 'September', 'October', 'November', 'December'][currentMonth];
      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
      const firstDay = new Date(currentYear, currentMonth, 1).getDay();

      const getEventsForDay = (day) => {
        const dateStr = `${currentYear}-${String(currentMonth + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        return events.filter(e => {
          const start = new Date(e.startDate);
          const end = new Date(e.endDate);
          const current = new Date(dateStr);
          return current >= start && current <= end;
        });
      };

      return (
        <div style={styles.monthView} className="fade-up">
          <div style={styles.monthHeader}>
            <h2 style={styles.monthName}>{monthName}</h2>
            <span style={styles.monthYear}>{currentYear}</span>
          </div>

          <div style={styles.calendarContainer}>
            <div style={styles.calendarGrid}>
              {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map((day, idx) => (
                <div key={idx} style={styles.calendarDayHeader}>{day}</div>
              ))}
              
              {Array.from({ length: firstDay }, (_, i) => (
                <div key={`empty-${i}`} style={styles.calendarDayEmpty} />
              ))}
              
              {Array.from({ length: daysInMonth }, (_, i) => {
                const day = i + 1;
                const dayEvents = getEventsForDay(day);
                const isToday = day === now.getDate();
                
                return (
                  <div 
                    key={day} 
                    style={{
                      ...styles.calendarDay,
                      ...(isToday && styles.calendarDayToday),
                      ...(dayEvents.length > 0 && {
                        backgroundColor: EVENT_TYPES[dayEvents[0].type].lightColor,
                      })
                    }}
                  >
                    <span style={{
                      ...styles.calendarDayNumber,
                      ...(isToday && styles.calendarDayNumberToday)
                    }}>{day}</span>
                    {dayEvents.length > 0 && (
                      <div style={styles.calendarDayDots}>
                        {dayEvents.slice(0, 3).map((event, idx) => (
                          <span 
                            key={idx} 
                            style={{
                              ...styles.calendarDayDot,
                              backgroundColor: EVENT_TYPES[event.type].color
                            }}
                          />
                        ))}
                      </div>
                    )}
                  </div>
                );
              })}
            </div>
          </div>

          <div style={styles.eventsList}>
            <div style={styles.eventsHeader}>
              <h3 style={styles.eventsTitle}>Planned Moments</h3>
              <button style={styles.addEventButton} onClick={onAddEvent}>
                + Add
              </button>
            </div>
            
            {events.length === 0 ? (
              <div style={styles.eventsEmpty}>
                <p style={styles.eventsEmptyText}>Nothing scheduled yet.</p>
                <p style={styles.eventsEmptyHint}>What do you want to make space for?</p>
              </div>
            ) : (
              <div style={styles.eventsGrid}>
                {events.map(event => (
                  <div 
                    key={event.id} 
                    style={{
                      ...styles.eventCard,
                      borderLeftColor: EVENT_TYPES[event.type].color,
                      backgroundColor: EVENT_TYPES[event.type].lightColor,
                    }}
                  >
                    <div style={styles.eventCardContent}>
                      <div style={styles.eventCardTop}>
                        <span style={{...styles.eventCardIcon, color: EVENT_TYPES[event.type].color}}>
                          {EVENT_TYPES[event.type].icon}
                        </span>
                        <span style={styles.eventCardType}>{EVENT_TYPES[event.type].label}</span>
                        {event.isShared && <span style={styles.eventCardShared}>shared</span>}
                      </div>
                      <h4 style={styles.eventCardTitle}>{event.title}</h4>
                      <p style={styles.eventCardDate}>
                        {new Date(event.startDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}
                        {event.startDate !== event.endDate && (
                          <> – {new Date(event.endDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</>
                        )}
                      </p>
                    </div>
                    <button 
                      style={styles.eventCardDelete}
                      onClick={() => onDeleteEvent(event.id)}
                    >
                      ×
                    </button>
                  </div>
                ))}
              </div>
            )}
          </div>
        </div>
      );
    }

    // ============ CHAT COMPONENTS ============
    function ChatMessage({ message }) {
      const isAssistant = message.role === 'assistant';
      
      return (
        <div style={{
          ...styles.chatMessage,
          ...(isAssistant ? styles.chatMessageAssistant : styles.chatMessageUser)
        }} className="fade-in">
          {isAssistant && (
            <div style={styles.chatAvatar}>
              <span style={styles.chatAvatarText}>T</span>
            </div>
          )}
          <div style={{
            ...styles.chatBubble,
            ...(isAssistant ? styles.chatBubbleAssistant : styles.chatBubbleUser)
          }}>
            {message.content.split('\n').map((line, i) => (
              <p key={i} style={{ marginBottom: line ? '0.75rem' : '0' }}>
                {line}
              </p>
            ))}
          </div>
        </div>
      );
    }

    function TypingIndicator() {
      return (
        <div style={styles.chatMessage} className="fade-in">
          <div style={styles.chatAvatar}>
            <span style={styles.chatAvatarText}>T</span>
          </div>
          <div style={styles.typingBubble}>
            <span style={{...styles.typingDot, animationDelay: '0s'}}>•</span>
            <span style={{...styles.typingDot, animationDelay: '0.15s'}}>•</span>
            <span style={{...styles.typingDot, animationDelay: '0.3s'}}>•</span>
          </div>
        </div>
      );
    }

    // ============ EVENT MODAL ============
    function EventModal({ onClose, onAdd }) {
      const [title, setTitle] = useState('');
      const [type, setType] = useState('trip');
      const [startDate, setStartDate] = useState('');
      const [endDate, setEndDate] = useState('');
      const [isShared, setIsShared] = useState(false);

      const handleSubmit = (e) => {
        e.preventDefault();
        if (!title || !startDate || !endDate) return;
        onAdd({ title, type, startDate, endDate, isShared });
      };

      return (
        <div style={styles.modalOverlay} onClick={onClose}>
          <div style={styles.modal} onClick={e => e.stopPropagation()} className="fade-up">
            <div style={styles.modalHeader}>
              <h3 style={styles.modalTitle}>Add a moment</h3>
              <button style={styles.modalClose} onClick={onClose}>×</button>
            </div>
            
            <form onSubmit={handleSubmit} style={styles.modalForm}>
              <div style={styles.formField}>
                <label style={styles.formLabel}>What is it?</label>
                <input
                  type="text"
                  style={styles.formInput}
                  value={title}
                  onChange={(e) => setTitle(e.target.value)}
                  placeholder="Weekend trip, date night, rest day..."
                />
              </div>

              <div style={styles.formField}>
                <label style={styles.formLabel}>Type</label>
                <div style={styles.typeSelector}>
                  {Object.entries(EVENT_TYPES).map(([key, value]) => (
                    <button
                      key={key}
                      type="button"
                      style={{
                        ...styles.typeOption,
                        ...(type === key && {
                          borderColor: value.color,
                          backgroundColor: value.lightColor,
                        })
                      }}
                      onClick={() => setType(key)}
                    >
                      <span style={{ color: value.color }}>{value.icon}</span>
                      <span>{value.label}</span>
                    </button>
                  ))}
                </div>
              </div>

              <div style={styles.formRow}>
                <div style={styles.formField}>
                  <label style={styles.formLabel}>Start</label>
                  <input
                    type="date"
                    style={styles.formInput}
                    value={startDate}
                    onChange={(e) => setStartDate(e.target.value)}
                  />
                </div>
                <div style={styles.formField}>
                  <label style={styles.formLabel}>End</label>
                  <input
                    type="date"
                    style={styles.formInput}
                    value={endDate}
                    onChange={(e) => setEndDate(e.target.value)}
                  />
                </div>
              </div>

              <label style={styles.checkboxLabel}>
                <input
                  type="checkbox"
                  checked={isShared}
                  onChange={(e) => setIsShared(e.target.checked)}
                  style={styles.checkbox}
                />
                <span>This is shared with my partner</span>
              </label>

              <button 
                type="submit" 
                style={{
                  ...styles.submitButton,
                  ...(!title || !startDate || !endDate ? styles.submitButtonDisabled : {})
                }}
                disabled={!title || !startDate || !endDate}
              >
                Add to timeline
              </button>
            </form>
          </div>
        </div>
      );
    }

    // ============ STYLES ============
    const styles = {
      container: {
        minHeight: '100vh',
        position: 'relative',
      },
      header: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        padding: '1.25rem 2.5rem',
        borderBottom: '1px solid var(--sand)',
        backgroundColor: 'var(--bg-card)',
        position: 'relative',
        zIndex: 10,
      },
      logoContainer: {
        display: 'flex',
        alignItems: 'center',
        gap: '0.5rem',
      },
      logo: {
        fontSize: '1.5rem',
        fontFamily: "'Fraunces', serif",
        fontWeight: 400,
        color: 'var(--charcoal)',
        letterSpacing: '0.02em',
      },
      nav: {
        display: 'flex',
        gap: '0.25rem',
        backgroundColor: 'var(--bg-elevated)',
        padding: '4px',
        borderRadius: '10px',
      },
      navButton: {
        padding: '0.5rem 1.25rem',
        backgroundColor: 'transparent',
        border: 'none',
        borderRadius: '8px',
        color: 'var(--charcoal-light)',
        fontSize: '0.875rem',
        fontFamily: "'DM Sans', sans-serif",
        fontWeight: 500,
        cursor: 'pointer',
        transition: 'all 0.2s ease',
      },
      navButtonActive: {
        backgroundColor: 'var(--bg-card)',
        color: 'var(--charcoal)',
        boxShadow: '0 1px 3px rgba(0,0,0,0.08)',
      },
      main: {
        display: 'grid',
        gridTemplateColumns: '1fr 380px',
        height: 'calc(100vh - 65px)',
        position: 'relative',
        zIndex: 10,
      },
      vizPanel: {
        padding: '2rem 3rem',
        display: 'flex',
        alignItems: 'flex-start',
        justifyContent: 'center',
        overflow: 'auto',
        backgroundColor: 'var(--bg-main)',
      },
      chatPanel: {
        backgroundColor: 'var(--bg-card)',
        borderLeft: '1px solid var(--sand)',
        display: 'flex',
        flexDirection: 'column',
      },
      chatMessages: {
        flex: 1,
        padding: '1.5rem',
        overflowY: 'auto',
        display: 'flex',
        flexDirection: 'column',
        gap: '1rem',
      },
      chatMessage: {
        display: 'flex',
        gap: '0.75rem',
        alignItems: 'flex-start',
      },
      chatMessageAssistant: {
        justifyContent: 'flex-start',
      },
      chatMessageUser: {
        justifyContent: 'flex-end',
      },
      chatAvatar: {
        width: '32px',
        height: '32px',
        borderRadius: '50%',
        backgroundColor: 'var(--sage-light)',
        border: '1px solid var(--sage-soft)',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        flexShrink: 0,
      },
      chatAvatarText: {
        fontFamily: "'Fraunces', serif",
        fontSize: '0.875rem',
        color: 'var(--sage)',
        fontWeight: 500,
      },
      chatBubble: {
        padding: '0.875rem 1rem',
        borderRadius: '14px',
        maxWidth: '85%',
        fontSize: '0.9rem',
        lineHeight: 1.6,
      },
      chatBubbleAssistant: {
        backgroundColor: 'var(--bg-elevated)',
        borderTopLeftRadius: '4px',
        color: 'var(--charcoal)',
      },
      chatBubbleUser: {
        backgroundColor: 'var(--sage)',
        borderTopRightRadius: '4px',
        color: 'white',
      },
      typingBubble: {
        padding: '0.875rem 1rem',
        backgroundColor: 'var(--bg-elevated)',
        borderRadius: '14px',
        borderTopLeftRadius: '4px',
        display: 'flex',
        gap: '4px',
      },
      typingDot: {
        color: 'var(--sage)',
        fontSize: '1.25rem',
        lineHeight: 1,
        animation: 'pulse 1s infinite',
      },
      chatInputArea: {
        padding: '1rem 1.25rem 1.25rem',
        borderTop: '1px solid var(--sand)',
      },
      chatInput: {
        width: '100%',
        padding: '0.875rem 1rem',
        backgroundColor: 'var(--bg-elevated)',
        border: '1px solid var(--sand)',
        borderRadius: '12px',
        color: 'var(--charcoal)',
        fontSize: '0.9rem',
        fontFamily: "'DM Sans', sans-serif",
        resize: 'none',
        outline: 'none',
        transition: 'border-color 0.2s ease',
        marginBottom: '0.75rem',
      },
      chatActions: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
      },
      progressButton: {
        padding: '0.5rem 1rem',
        backgroundColor: 'var(--bg-elevated)',
        border: '1px solid var(--sand-dark)',
        borderRadius: '20px',
        color: 'var(--charcoal)',
        fontSize: '0.8rem',
        fontFamily: "'DM Sans', sans-serif",
        cursor: 'pointer',
        transition: 'all 0.2s ease',
      },
      sendButton: {
        width: '38px',
        height: '38px',
        borderRadius: '50%',
        backgroundColor: 'var(--sage)',
        border: 'none',
        color: 'white',
        fontSize: '1.125rem',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        transition: 'all 0.2s ease',
        marginLeft: 'auto',
      },
      sendButtonDisabled: {
        backgroundColor: 'var(--sand)',
        cursor: 'not-allowed',
      },

      // Year View
      yearView: {
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        gap: '2rem',
        width: '100%',
        maxWidth: '700px',
        paddingTop: '1rem',
      },
      yearHeader: {
        textAlign: 'center',
      },
      yearLabel: {
        fontSize: '0.875rem',
        color: 'var(--charcoal-muted)',
        textTransform: 'uppercase',
        letterSpacing: '0.1em',
      },
      yearNumber: {
        fontSize: '3.5rem',
        fontFamily: "'Fraunces', serif",
        fontWeight: 400,
        color: 'var(--charcoal)',
        marginTop: '-0.25rem',
      },
      yearGrid: {
        display: 'grid',
        gridTemplateColumns: 'repeat(2, 1fr)',
        gap: '1rem',
        width: '100%',
      },
      seasonCard: {
        backgroundColor: 'var(--bg-card)',
        border: '1px solid var(--sand)',
        borderRadius: '16px',
        padding: '1.5rem',
        cursor: 'pointer',
        transition: 'all 0.2s ease',
        textAlign: 'left',
        display: 'flex',
        flexDirection: 'column',
        gap: '0.5rem',
      },
      seasonCardIcon: {
        fontSize: '1.5rem',
      },
      seasonCardName: {
        fontSize: '1.25rem',
        fontFamily: "'Fraunces', serif",
        fontWeight: 400,
      },
      seasonCardEssence: {
        fontSize: '0.875rem',
        color: 'var(--charcoal-muted)',
        fontStyle: 'italic',
      },
      seasonCardMonths: {
        display: 'flex',
        gap: '0.5rem',
        marginTop: '0.5rem',
      },
      seasonCardMonth: {
        fontSize: '0.75rem',
        color: 'var(--charcoal-light)',
        backgroundColor: 'var(--bg-elevated)',
        padding: '0.25rem 0.5rem',
        borderRadius: '4px',
      },
      yearHint: {
        fontSize: '0.875rem',
        color: 'var(--charcoal-muted)',
        textAlign: 'center',
      },

      // Season View
      seasonView: {
        display: 'flex',
        flexDirection: 'column',
        width: '100%',
        maxWidth: '600px',
        gap: '2rem',
      },
      seasonTabs: {
        display: 'flex',
        gap: '0.5rem',
        justifyContent: 'center',
      },
      seasonTab: {
        padding: '0.5rem 1rem',
        backgroundColor: 'var(--bg-card)',
        border: '1px solid var(--sand)',
        borderRadius: '20px',
        color: 'var(--charcoal-light)',
        fontSize: '0.875rem',
        fontFamily: "'DM Sans', sans-serif",
        cursor: 'pointer',
        transition: 'all 0.2s ease',
      },
      seasonContent: {
        backgroundColor: 'var(--bg-card)',
        borderRadius: '20px',
        padding: '2.5rem',
        textAlign: 'center',
        border: '1px solid var(--sand)',
      },
      seasonHeader: {
        marginBottom: '2rem',
      },
      seasonIcon: {
        fontSize: '2.5rem',
        display: 'block',
        marginBottom: '0.5rem',
      },
      seasonName: {
        fontSize: '2.5rem',
        fontFamily: "'Fraunces', serif",
        fontWeight: 400,
      },
      seasonEssence: {
        fontSize: '1rem',
        color: 'var(--charcoal-muted)',
        fontStyle: 'italic',
        marginTop: '0.25rem',
      },
      seasonMonths: {
        display: 'flex',
        gap: '1rem',
        justifyContent: 'center',
      },
      seasonMonth: {
        padding: '1rem 1.5rem',
        borderRadius: '12px',
        border: '1px solid',
      },
      seasonMonthName: {
        fontSize: '1rem',
        color: 'var(--charcoal)',
        fontWeight: 500,
      },

      // Month View
      monthView: {
        width: '100%',
        maxWidth: '600px',
      },
      monthHeader: {
        display: 'flex',
        alignItems: 'baseline',
        gap: '0.75rem',
        marginBottom: '1.5rem',
      },
      monthName: {
        fontSize: '2rem',
        fontFamily: "'Fraunces', serif",
        fontWeight: 400,
        color: 'var(--charcoal)',
      },
      monthYear: {
        fontSize: '1rem',
        color: 'var(--charcoal-muted)',
      },
      calendarContainer: {
        backgroundColor: 'var(--bg-card)',
        borderRadius: '16px',
        padding: '1.25rem',
        marginBottom: '1.5rem',
        border: '1px solid var(--sand)',
      },
      calendarGrid: {
        display: 'grid',
        gridTemplateColumns: 'repeat(7, 1fr)',
        gap: '4px',
      },
      calendarDayHeader: {
        padding: '0.5rem',
        textAlign: 'center',
        color: 'var(--charcoal-muted)',
        fontSize: '0.75rem',
        fontWeight: 500,
      },
      calendarDayEmpty: {
        aspectRatio: '1',
      },
      calendarDay: {
        aspectRatio: '1',
        backgroundColor: 'var(--bg-elevated)',
        borderRadius: '8px',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        justifyContent: 'center',
        gap: '2px',
        cursor: 'pointer',
        transition: 'all 0.15s ease',
        position: 'relative',
      },
      calendarDayToday: {
        border: '2px solid var(--sage)',
      },
      calendarDayNumber: {
        fontSize: '0.875rem',
        color: 'var(--charcoal-light)',
      },
      calendarDayNumberToday: {
        color: 'var(--sage)',
        fontWeight: 600,
      },
      calendarDayDots: {
        display: 'flex',
        gap: '2px',
        position: 'absolute',
        bottom: '4px',
      },
      calendarDayDot: {
        width: '5px',
        height: '5px',
        borderRadius: '50%',
      },
      eventsList: {
        backgroundColor: 'var(--bg-card)',
        borderRadius: '16px',
        padding: '1.25rem',
        border: '1px solid var(--sand)',
      },
      eventsHeader: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '1rem',
      },
      eventsTitle: {
        fontSize: '1rem',
        fontFamily: "'Fraunces', serif",
        color: 'var(--charcoal)',
      },
      addEventButton: {
        padding: '0.4rem 0.875rem',
        backgroundColor: 'var(--sage)',
        border: 'none',
        borderRadius: '16px',
        color: 'white',
        fontSize: '0.8rem',
        fontFamily: "'DM Sans', sans-serif",
        cursor: 'pointer',
        transition: 'all 0.2s ease',
      },
      eventsEmpty: {
        textAlign: 'center',
        padding: '1.5rem',
      },
      eventsEmptyText: {
        color: 'var(--charcoal-light)',
        fontSize: '0.9rem',
      },
      eventsEmptyHint: {
        color: 'var(--charcoal-muted)',
        fontSize: '0.85rem',
        fontStyle: 'italic',
        marginTop: '0.25rem',
      },
      eventsGrid: {
        display: 'flex',
        flexDirection: 'column',
        gap: '0.75rem',
      },
      eventCard: {
        borderRadius: '10px',
        padding: '0.875rem 1rem',
        borderLeft: '3px solid',
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'flex-start',
      },
      eventCardContent: {
        flex: 1,
      },
      eventCardTop: {
        display: 'flex',
        alignItems: 'center',
        gap: '0.5rem',
        marginBottom: '0.25rem',
      },
      eventCardIcon: {
        fontSize: '0.8rem',
      },
      eventCardType: {
        fontSize: '0.7rem',
        color: 'var(--charcoal-muted)',
        textTransform: 'uppercase',
        letterSpacing: '0.04em',
      },
      eventCardShared: {
        fontSize: '0.65rem',
        padding: '0.125rem 0.4rem',
        backgroundColor: 'rgba(0,0,0,0.06)',
        borderRadius: '8px',
        color: 'var(--charcoal-muted)',
      },
      eventCardTitle: {
        fontSize: '0.95rem',
        color: 'var(--charcoal)',
        fontFamily: "'DM Sans', sans-serif",
        fontWeight: 500,
      },
      eventCardDate: {
        fontSize: '0.8rem',
        color: 'var(--charcoal-muted)',
        marginTop: '0.125rem',
      },
      eventCardDelete: {
        width: '24px',
        height: '24px',
        borderRadius: '50%',
        backgroundColor: 'transparent',
        border: 'none',
        color: 'var(--charcoal-muted)',
        fontSize: '1.125rem',
        cursor: 'pointer',
        opacity: 0.5,
        transition: 'opacity 0.15s ease',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
      },

      // Modal
      modalOverlay: {
        position: 'fixed',
        top: 0,
        left: 0,
        right: 0,
        bottom: 0,
        backgroundColor: 'rgba(0,0,0,0.3)',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        zIndex: 1000,
        backdropFilter: 'blur(2px)',
      },
      modal: {
        backgroundColor: 'var(--bg-card)',
        borderRadius: '20px',
        padding: '1.75rem',
        width: '90%',
        maxWidth: '420px',
        border: '1px solid var(--sand)',
        boxShadow: '0 20px 40px rgba(0,0,0,0.15)',
      },
      modalHeader: {
        display: 'flex',
        justifyContent: 'space-between',
        alignItems: 'center',
        marginBottom: '1.5rem',
      },
      modalTitle: {
        fontSize: '1.25rem',
        fontFamily: "'Fraunces', serif",
        color: 'var(--charcoal)',
      },
      modalClose: {
        width: '30px',
        height: '30px',
        borderRadius: '50%',
        backgroundColor: 'var(--bg-elevated)',
        border: 'none',
        color: 'var(--charcoal-muted)',
        fontSize: '1.125rem',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
      },
      modalForm: {
        display: 'flex',
        flexDirection: 'column',
        gap: '1.25rem',
      },
      formField: {
        display: 'flex',
        flexDirection: 'column',
        gap: '0.5rem',
      },
      formRow: {
        display: 'grid',
        gridTemplateColumns: '1fr 1fr',
        gap: '0.75rem',
      },
      formLabel: {
        fontSize: '0.75rem',
        color: 'var(--charcoal-muted)',
        textTransform: 'uppercase',
        letterSpacing: '0.05em',
        fontWeight: 500,
      },
      formInput: {
        padding: '0.75rem 1rem',
        backgroundColor: 'var(--bg-elevated)',
        border: '1px solid var(--sand)',
        borderRadius: '10px',
        color: 'var(--charcoal)',
        fontSize: '0.9rem',
        fontFamily: "'DM Sans', sans-serif",
        outline: 'none',
        transition: 'border-color 0.2s ease',
      },
      typeSelector: {
        display: 'grid',
        gridTemplateColumns: 'repeat(3, 1fr)',
        gap: '0.5rem',
      },
      typeOption: {
        padding: '0.625rem 0.5rem',
        backgroundColor: 'var(--bg-elevated)',
        border: '1px solid var(--sand)',
        borderRadius: '10px',
        color: 'var(--charcoal)',
        fontSize: '0.75rem',
        fontFamily: "'DM Sans', sans-serif",
        cursor: 'pointer',
        display: 'flex',
        flexDirection: 'column',
        alignItems: 'center',
        gap: '0.25rem',
        transition: 'all 0.15s ease',
      },
      checkboxLabel: {
        display: 'flex',
        alignItems: 'center',
        gap: '0.75rem',
        fontSize: '0.875rem',
        color: 'var(--charcoal-light)',
        cursor: 'pointer',
      },
      checkbox: {
        width: '18px',
        height: '18px',
        accentColor: 'var(--sage)',
      },
      submitButton: {
        padding: '0.875rem',
        backgroundColor: 'var(--sage)',
        border: 'none',
        borderRadius: '12px',
        color: 'white',
        fontSize: '0.9rem',
        fontFamily: "'DM Sans', sans-serif",
        fontWeight: 500,
        cursor: 'pointer',
        transition: 'all 0.2s ease',
        marginTop: '0.25rem',
      },
      submitButtonDisabled: {
        backgroundColor: 'var(--sand-dark)',
        cursor: 'not-allowed',
      },
    };

    // ============ RENDER ============
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<TendApp />);
  </script>
</body>
</html>
